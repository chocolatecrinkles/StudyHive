{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  
   <script src="https://kit.fontawesome.com/a2d9d5c6b2.js" crossorigin="anonymous"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Study-Hive Listings</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Nunito+Sans:wght@400;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/a2d9d5c6b2.js" crossorigin="anonymous"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="{% static 'css/listings.css' %}">
</head>

<body>
  <div class="listings-page">
    
    <!-- Decorative Background -->
    <div class="bg-decoration">
      <div class="circle circle-1"></div>
      <div class="circle circle-2"></div>
      <div class="circle circle-3"></div>
    </div>

    <!-- Hero Section -->
    <div class="hero-section">
      <a href="{% url 'core:home' %}" class="back-button">
        <i class="fas fa-arrow-left"></i> Back to Home Page
      </a>

      <div class="hero-content">
        <div class="badge"><i class="fas fa-map-marked-alt"></i> Cebu Study Spots</div>
        <h1 class="hero-title">
          Discover Your Perfect <span class="gradient-text">Study Space</span>
        </h1>
        <p class="hero-subtitle">Explore the best caf√©s, coworking spots, and libraries near CIT-U</p>

        <div class="stats-row">
          <div class="stat-item">
            <div class="stat-number" id="totalSpots">8</div>
            <div class="stat-label">Study Spots</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">24/7</div>
            <div class="stat-label">Available</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">Free</div>
            <div class="stat-label">Wi-Fi Options</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Filters -->
    <div class="control-panel">
      <div class="search-container">
        <div class="search-box-enhanced">
          <i class="fas fa-search search-icon"></i>
          <input type="text" id="searchInput" placeholder="Search by name, location, or amenities...">
          <button class="clear-search" id="clearSearch"><i class="fas fa-times"></i></button>
        </div>
      </div>

      <div class="filter-controls">
        <div class="filter-group">
          <label><i class="fas fa-sort"></i> Sort By</label>
          <select id="sortOptions" class="select-enhanced">
            <option value="nearest">üìç Nearest First</option>
            <option value="rating">‚≠ê Highest Rated</option>
            <option value="price">üí∞ Best Price</option>
            <option value="name">üî§ Alphabetical</option>
          </select>
        </div>

        <div class="filter-group">
          <label><i class="fas fa-filter"></i> Filters</label>
          <div class="filter-chips">
            <button class="chip active" data-filter="all">All</button>
            <button class="chip" data-filter="wifi"><i class="fas fa-wifi"></i> Wi-Fi</button>
            <button class="chip" data-filter="free"><i class="fas fa-coins"></i> Free</button>
            <button class="chip" data-filter="ac"><i class="fas fa-wind"></i> AC</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Listings Section -->
    <div class="listings-container">
      <div class="section-header">
        <h2 class="section-title">Available Study Spaces</h2>
        <div class="view-toggle">
          <button class="toggle-btn active" data-view="grid"><i class="fas fa-th"></i></button>
          <button class="toggle-btn" data-view="list"><i class="fas fa-list"></i></button>
        </div>
      </div>

      <div class="listings-grid" id="listingsGrid">
        {% for space in spaces %}
        <div class="listing-card"
             data-wifi="{{ space.wifi|yesno:'true,false' }}"
             data-free="{{ space.free|yesno:'true,false' }}"
             data-ac="{{ space.ac|yesno:'true,false' }}"
             data-name="{{ space.name }}"
             data-rating="{{ space.rating }}">
          <div class="card-image-container">
            {% if space.image %}
            <img src="{{ space.image.url }}" alt="{{ space.name }}" class="card-image">
            {% else %}
            <img src="{% static 'imgs/cebu_logo.png' %}" alt="Default Image" class="card-image">
            {% endif %}
            <div class="image-overlay">
              <button class="quick-view-btn" onclick="viewDetails('{{ space.id }}')">
                <i class="fas fa-eye"></i> Quick View
              </button>
            </div>
            {% if space.free %}
            <div class="featured-badge"><i class="fas fa-star"></i> Free</div>
            {% endif %}
          </div>

          <div class="card-content">
            <div class="card-header">
              <h3 class="card-title">{{ space.name }}</h3>
              <div class="card-rating"><i class="fas fa-star"></i> {{ space.rating }}</div>
            </div>

            <p class="card-description">{{ space.description }}</p>

            <div class="card-amenities">
              <span class="amenity-item"><i class="fas fa-map-marker-alt"></i> {{ space.location }}</span>
              {% if space.wifi %}<span class="amenity-item"><i class="fas fa-wifi"></i> Wi-Fi</span>{% endif %}
              {% if space.ac %}<span class="amenity-item"><i class="fas fa-wind"></i> AC</span>{% endif %}
              {% if space.free %}<span class="amenity-item"><i class="fas fa-coins"></i> Free</span>{% endif %}
            </div>
          </div>
        </div>
        {% empty %}
        <div class="empty-state">
          <i class="fas fa-search empty-icon"></i>
          <h3>No Listings Found</h3>
          <p>Try searching for another study spot.</p>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Floating Add Button -->
    <a href="{% url 'core:create_listing' %}" class="fab" title="Add Study Space">
      <i class="fas fa-plus"></i>
    </a>
  </div>

  <!-- JS -->
  <script src="{% static 'js/listings.js' %}"></script>
</body>
</html>
