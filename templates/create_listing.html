{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add New Listing | StudyHive</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Nunito+Sans:wght@400;700&display=swap" rel="stylesheet">
  
  <script src="https://kit.fontawesome.com/a2d9d5c6b2.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="{% static 'css/create_listings.css' %}">
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <div class="create-page">
    
    <header class="header-bar">
      <a href="{% url 'core:home' %}" class="logo">
        <span class="brand-study">Study</span><span class="brand-hive">Hive</span>
      </a>
      <a href="{% url 'core:home' %}" class="back-button" aria-label="Back to Listings">
        <i class="fas fa-arrow-left"></i> <span>Back to Home</span>
      </a>
    </header>

    <main class="form-container">
      <form method="POST" enctype="multipart/form-data" class="listing-form">
        {% csrf_token %}

        <h1 class="page-title"><i class="fas fa-plus-circle"></i> Create New Listing</h1>

        <div class="form-group">
          <label for="name"><i class="fas fa-map-marker-alt"></i> Study Space Name</label>
          <input type="text" id="name" name="name" placeholder="e.g., Workplace Café, Rizal Library" required>
        </div>

        <div class="form-group">
          <label for="location"><i class="fas fa-location-arrow"></i> Location</label>
          <input type="text" id="location" name="location" placeholder="Enter exact address or area" required>
        </div>

        <div class="form-group">
          <label for="description"><i class="fas fa-info-circle"></i> Description</label>
          <textarea id="description" name="description" rows="4" placeholder="Describe the vibe, noise level, and best features..." required></textarea>
        </div>
 
        <div class="form-group">
  <label><i class="fas fa-wifi"></i> Amenities (Select all that apply)</label>
  <div class="chip-group">
    <input type="checkbox" id="wifi" name="wifi">
    <label for="wifi">Free Wi-Fi</label>

    <input type="checkbox" id="open_24_7" name="open_24_7">
    <label for="open_24_7">Open 24/7</label>

    <input type="checkbox" id="outlets" name="outlets">
    <label for="outlets">Power Outlets</label>

    <input type="checkbox" id="coffee" name="coffee">
    <label for="coffee">Café / Drinks</label>

    <input type="checkbox" id="ac" name="ac">
    <label for="ac">Air-conditioned</label>

    <input type="checkbox" id="pastries" name="pastries">
    <label for="pastries">Pastries</label>
  </div>
</div>
 

        <div class="form-group">
          <label for="image-upload" class="file-upload-label">
            <i class="fas fa-image"></i> 
            <span>Upload Space Image</span>
          </label>
          <input type="file" id="image-upload" name="image" accept="image/*" required>
          <input type="hidden" name="image_url" id="image_url">
          <div id="image-preview-container"></div>
        </div>

        <div class="form-actions">
          <a href="{% url 'core:home' %}" class="cancel-btn">Cancel</a>
          <button type="submit" class="submit-btn"><i class="fas fa-save"></i> Save Listing</button>
        </div>
      </form>
    </main>
  </div>

  <script src="{% static 'js/create_listing.js' %}"></script>
<!--   
  <script>
const SUPABASE_URL = "{{ SUPABASE_URL }}";
const SUPABASE_KEY = "{{ SUPABASE_KEY }}";

const { createClient } = supabase;
const client = createClient(SUPABASE_URL, SUPABASE_KEY);

document.getElementById("image-upload").addEventListener("change", async function (e) {
    const file = e.target.files[0];
    if (!file) return;

    const filePath = `studyspots/${Date.now()}_${file.name}`;

    // Upload to Supabase
    let { data, error } = await client.storage
        .from("studyspots")
        .upload(filePath, file);

    if (error) {
        alert("Upload failed: " + error.message);
        return;
    }

    // Get public URL
    const { data: publicData } = client.storage
        .from("studyspots")
        .getPublicUrl(filePath);

    document.getElementById("image_url").value = publicData.publicUrl;
});
</script> -->

</body>
</html>